<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" />

    <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-messaging.js"></script>

    <script>
      const FIREBASE_CONFIG = {
        apiKey: "AIzaSyDCnh8weSKET7qaa7X29zpwvgYrWi538sU",
        authDomain: "cometchat-test-project.firebaseapp.com",
        projectId: "cometchat-test-project",
        storageBucket: "cometchat-test-project.appspot.com",
        messagingSenderId: "908533477990",
        appId: "1:908533477990:web:4a7ef271de0301d12eb3a7",
        measurementId: "G-FBNRNZ7WZV",
      };
      // Initialize Firebase only once
      firebase.initializeApp(FIREBASE_CONFIG);
    </script>

    <!-- Register the service worker. -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("/firebase-messaging-sw.js");
        });
      }
    </script>

    <script
      type="text/javascript"
      src="https://unpkg.com/@cometchat-pro/chat@3.0.10/CometChat.js"
    ></script>

    <script src="firebase.js" defer></script>
  </head>
  <body>
    <!-- Login Card -->
    <div id="login-card">
      <input type="text" id="uid" placeholder="Enter UID" />
      <input type="submit" value="Login" id="login" onclick="login()" />
    </div>

    <!-- USERS CARD
    <div id="users-card">
      <div style="position: fixed;margin-top:0px;">Users</div>
    </div> -->

    <!-- Chats Card -->

    <div id="chat-card" style="display: none">
      <div>
        <p>Username : <span id="your-username">Loading...</span></p>
        <a href="#" onclick="logout()">Logout</a>
      </div>
      <div style="display: flex" id="allConversations">
        <div id="conversation-card"></div>
        <div id="chat">
          <div id="individualName"></div>
          <div id="messagesDIV"></div>
          <div>
            <input
              type="text"
              id="message"
              name="message"
              placeholder="Enter message"
            />
            <input
              type="submit"
              value="Send"
              id="sendmessage"
              onclick="sendMessage()"
            />
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="./index.js"></script>
  </body>
</html>
